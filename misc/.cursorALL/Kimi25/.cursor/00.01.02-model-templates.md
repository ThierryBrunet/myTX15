# Model Configuration Templates

## 01.00.00 - Quadcopter Template (DarwinFPV F415)

### 01.01.00 - Model Setup

```yaml
Model:
  name: QUAD_Angel30_Darwin_Indoor
  bitmap: "quad_indoor.bmp"
  labels: 
    - "Angel30"
    - "Indoor"

Timer:
  Timer1:
    mode: THs
    switch: L01  # Armed state
    countdown: Voice
    value: 5:00

  Timer2:
    mode: ON
    countdown: Beep
    value: 10:00
```

### 01.02.00 - Inputs Configuration

| Channel | Source | Weight | Expo | Trim |
|---------|--------|--------|------|------|
| I1 (Roll) | Ail | 50% | 30% | Yes |
| I2 (Pitch) | Ele | 50% | 30% | Yes |
| I3 (Throttle) | Thr | 100% | 0% | No |
| I4 (Yaw) | Rud | 70% | 20% | Yes |
| I5 (Arm) | SA | 100% | 0% | No |
| I6 (Mode) | SB | 100% | 0% | No |
| I7 (Beeper) | SF↓ | 100% | 0% | No |
| I8 (Turtle) | SG↓ | 100% | 0% | No |

### 01.03.00 - Mixes Configuration

```yaml
Mixes:
  CH1 (Roll):
    - source: I1
      weight: 50  # Indoor mode
      multiplex: REPLACE
      flightMode: Indoor
    - source: I1
      weight: 70  # Outdoor mode
      multiplex: REPLACE
      flightMode: Outdoor
    - source: I1
      weight: 100  # Normal mode
      multiplex: REPLACE
      flightMode: Normal

  CH2 (Pitch):
    - source: I2
      weight: 50  # Indoor
      multiplex: REPLACE
      flightMode: Indoor
    - source: I2
      weight: 70  # Outdoor
      multiplex: REPLACE
      flightMode: Outdoor
    - source: I2
      weight: 100  # Normal
      multiplex: REPLACE
      flightMode: Normal

  CH3 (Throttle):
    - source: I3
      weight: 100
      curve: "indoor_thr"  # Soft curve
      flightMode: Indoor
    - source: I3
      weight: 85  # Limit for outdoor
      flightMode: Outdoor
    - source: I3
      weight: 100
      flightMode: Normal

  CH4 (Yaw):
    - source: I4
      weight: 70
      flightMode: Indoor
    - source: I4
      weight: 70
      flightMode: Outdoor
    - source: I4
      weight: 100
      flightMode: Normal

  CH5 (AUX1/Arm):
    - source: MAX
      weight: -100  # Disarmed default
      switch: !L01  # Not armed
      multiplex: REPLACE
    - source: MAX
      weight: 100   # Armed
      switch: L01
      multiplex: REPLACE

  CH6 (AUX2/FlightMode):
    - source: I6
      weight: 100

  CH7 (AUX3/Beeper):
    - source: I7
      weight: 100

  CH8 (AUX4/Turtle):
    - source: I8
      weight: 100
```

### 01.04.00 - Logical Switches (2-Step Arming)

```yaml
LogicalSwitches:
  L01 (Safe Arm):
    func: AND
    v1: SA↑      # Arm switch up
    v2: Thr<=-95%  # Throttle at minimum
    delay: 0.5s   # 0.5s delay for safety

  L02 (Throttle Active):
    func: AND
    v1: L01       # Armed
    v2: Thr>-95%  # Throttle raised

  L03 (Low Battery):
    func: a<x
    v1: RxBt      # Receiver battery
    v2: 7.4V      # 2S warning

  L04 (Critical Battery):
    func: a<x
    v1: RxBt
    v2: 7.0V      # 2S critical
```

### 01.05.00 - Special Functions

```yaml
SpecialFunctions:
  SF01 (Arm Announce):
    switch: L01
    action: PlayTrack
    param: "armed"
    repeat: 1s

  SF02 (Disarm Announce):
    switch: !L01
    action: PlayTrack
    param: "disarmed"

  SF03 (Low Battery):
    switch: L03
    action: PlayValue
    param: RxBt
    repeat: 10s

  SF04 (Throttle Cut):
    switch: !L01
    action: OverrideCH
    param: CH3
    value: -100

  SF05 (RSSI Check):
    switch: ON
    action: PlayValue
    param: RSSI
    condition: !L01  # Only when disarmed
```

### 01.06.00 - Flight Modes

```yaml
FlightModes:
  Indoor:
    switch: SB↑
    trim: Common
    name: "Indoor"

  Outdoor:
    switch: SB-
    trim: Common
    name: "Outdoor"

  Normal:
    switch: SB↓
    trim: Common
    name: "Normal"
    fadeIn: 0.5s
    fadeOut: 0.5s
```

### 01.07.00 - Curves

```yaml
Curves:
  indoor_thr:
    type: 4-point
    points: [-100, -50, 0, 25, 50, 75, 100]
    smooth: true

  expo_low:
    type: Expo
    value: 30

  expo_med:
    type: Expo
    value: 20
```

### 01.08.00 - Global Variables

```yaml
GlobalVariables:
  GV1 (Stick Mode):
    default: 0
    min: 0
    max: 1
    unit: ""
    name: "Mode2/4"

  GV2 (Rate Multiplier):
    default: 100
    min: 0
    max: 100
    unit: "%"
    name: "Rates"
```

## 02.00.00 - Fixed Wing Template (Reflex V3)

### 02.01.00 - Model Setup

```yaml
Model:
  name: FW_Fx707s_Reflex_Beginner
  bitmap: "fw_beginner.bmp"
  labels:
    - "Fx707s"
    - "Beginner"

Timer:
    Timer1:
      mode: THs
      switch: L01
      countdown: Voice
      value: 8:00

    Timer2:
      mode: ON
      countdown: Beep
      value: 15:00
```

### 02.02.00 - Inputs Configuration

| Channel | Source | Weight | Expo | Trim |
|---------|--------|--------|------|------|
| I1 (Aileron) | Ail | 100% | 25% | Yes |
| I2 (Elevator) | Ele | 100% | 30% | Yes |
| I3 (Throttle) | Thr | 100% | 0% | No |
| I4 (Rudder) | Rud | 100% | 25% | Yes |
| I5 (Reflex Mode) | SC | 100% | 0% | No |
| I6 (Arm) | SD↑ | 100% | 0% | No |
| I7 (Flaps) | SE | 100% | 0% | No |
| I8 (Gear) | SF | 100% | 0% | No |

### 02.03.00 - Mixes Configuration

```yaml
Mixes:
  CH1 (Aileron):
    - source: I1
      weight: 80   # Beginner - reduced throws
      flightMode: Beginner
    - source: I1
      weight: 100  # Advanced
      flightMode: Advanced
    - source: I1
      weight: 100  # Full Manual
      flightMode: Manual

  CH2 (Elevator):
    - source: I2
      weight: 80   # Beginner
      flightMode: Beginner
    - source: I2
      weight: 100  # Advanced
      flightMode: Advanced
    - source: I2
      weight: 100  # Manual
      flightMode: Manual

  CH3 (Throttle):
    - source: I3
      weight: 100
      curve: "throttle_fw"

  CH4 (Rudder):
    - source: I4
      weight: 100

  CH5 (Reflex Mode - NOT USED for arming):
    - source: I5
      weight: 100
    # Reflex V3 interprets:
    # -100 to -33: Beginner (6-axis)
    # -33 to 33: Advanced (3-axis)
    # 33 to 100: Manual (off)

  CH6 (Arm/Cut):
    - source: MAX
      weight: -100  # Cut
      switch: !L01
      multiplex: REPLACE
    - source: MAX
      weight: 100   # Armed
      switch: L01
      multiplex: REPLACE

  CH7 (Flaps):
    - source: I7
      weight: 100
      offset: 0
      curve: "flap_curve"

  CH8 (Landing Gear):
    - source: I8
      weight: 100
```

### 02.04.00 - Logical Switches (2-Step Arming - No CH5)

```yaml
LogicalSwitches:
  L01 (Safe Arm):
    func: AND
    v1: SD↑       # Arm switch up
    v2: Thr<=-95% # Throttle minimum
    delay: 0.5s

  L02 (Motor Ready):
    func: AND
    v1: L01
    v2: Thr>-95%

  L03 (Reflex Beginner):
    func: a<x
    v1: CH5
    v2: -33

  L04 (Reflex Advanced):
    func: a<=x
    v1: CH5
    v2: 33
    and: L03!     # Not beginner

  L05 (Reflex Manual):
    func: a>x
    v1: CH5
    v2: 33
```

### 02.05.00 - Special Functions

```yaml
SpecialFunctions:
  SF01 (Arm Sound):
    switch: L01
    action: PlayTrack
    param: "motor_armed"

  SF02 (Disarm Sound):
    switch: !L01
    action: PlayTrack
    param: "motor_off"

  SF03 (Beginner Mode):
    switch: L03
    action: PlayTrack
    param: "beginner_mode"

  SF04 (Advanced Mode):
    switch: L04
    action: PlayTrack
    param: "advanced_mode"

  SF05 (Manual Mode):
    switch: L05
    action: PlayTrack
    param: "manual_mode"

  SF06 (Throttle Cut):
    switch: !L01
    action: OverrideCH
    param: CH3
    value: -100

  SF07 (Timer Start):
    switch: L01
    action: StartTimer1

  SF08 (Timer Stop):
    switch: !L01
    action: StopTimer1
```

### 02.06.00 - Flight Modes

```yaml
FlightModes:
  Beginner:
    switch: L03
    name: "Beginner"
    trim: Common

  Advanced:
    switch: L04
    name: "Advanced"
    trim: Common

  Manual:
    switch: L05
    name: "FullManual"
    trim: Common
```

### 02.07.00 - Curves

```yaml
Curves:
  throttle_fw:
    type: 5-point
    points: [-100, -25, 0, 50, 100]
    # Electric motors need deadband at low end

  flap_curve:
    type: 3-point
    points: [-100, 0, 100]
    # SE up: 0 flaps
    # SE mid: Half flaps
    # SE down: Full flaps
```

## 03.00.00 - Mode2/Mode4 Switch Template

### 03.01.00 - Global Variable Setup

```yaml
GlobalVariables:
  GV1:
    name: "StickMode"
    default: 0
    min: 0
    max: 1
    popup: true
    # 0 = Mode2 (Standard)
    # 1 = Mode4 (Throttle+Roll left)
```

### 03.02.00 - Special Functions for Mode Switch

```yaml
SpecialFunctions:
  SF_Mode2:
    switch: SH↑      # Momentary switch up
    action: AdjustGV
    param: GV1
    value: 0
    enable: ON

  SF_Mode4:
    switch: SH↓      # Momentary switch down
    action: AdjustGV
    param: GV1
    value: 1
    enable: ON

  SF_AnnounceMode:
    switch: ON
    action: PlayValue
    param: GV1
    condition: ON    # Announce on change
```

### 03.03.00 - Modified Mixes for Mode Switching

```yaml
Mixes:
  # Channel 1: Roll/Aileron
  CH1:
    - source: Ail
      weight: 100
      switch: GV1=0   # Mode2
      multiplex: REPLACE
    - source: Rud     # Mode4: Yaw becomes Roll
      weight: 100
      switch: GV1=1
      multiplex: REPLACE

  # Channel 4: Yaw/Rudder
  CH4:
    - source: Rud
      weight: 100
      switch: GV1=0   # Mode2
      multiplex: REPLACE
    - source: Ail     # Mode4: Roll becomes Yaw
      weight: 100
      switch: GV1=1
      multiplex: REPLACE

  # Channels 2 (Pitch) and 3 (Throttle) remain unchanged
  CH2:
    - source: Ele
      weight: 100

  CH3:
    - source: Thr
      weight: 100
```

### 03.04.00 - Logical Switch for Mode Indication

```yaml
LogicalSwitches:
  L_Mode2:
    func: a=x
    v1: GV1
    v2: 0

  L_Mode4:
    func: a=x
    v1: GV1
    v2: 1
```

## 04.00.00 - Receiver-Specific Configurations

### 04.01.00 - Cyclone PWM 7CH

**Configuration File: `7CH.json`**
```json
{
  "protocol": "CRSF",
  "channels": 7,
  "pwm_frequency": 50,
  "failsafe_mode": "hold",
  "output_map": {
    "CH1": "PWM1",
    "CH2": "PWM2",
    "CH3": "PWM3",
    "CH4": "PWM4",
    "CH5": "PWM5",
    "CH6": "PWM6",
    "CH7": "PWM7"
  },
  "voltage_monitoring": true,
  "telemetry": ["RSSI", "LQ", "RxBt"]
}
```

**EdgeTX Model Settings:**
- Internal RF: CRSF
- Packet Rate: 250Hz (balance of latency/range)
- Telemetry Ratio: 1:64
- Switch Mode: Hybrid

### 04.02.00 - DarwinFPV F415 AIO

**Betaflight Configuration:**
```
# Serial port for ELRS
serial 0 64 115200 57600 0 115200

# Receiver protocol
set serialrx_provider = CRSF

# Arming configuration
set small_angle = 180
set auto_disarm_delay = 5

# Failsafe
set failsafe_delay = 5
set failsafe_off_delay = 0
set failsafe_throttle = 1000
set failsafe_switch_mode = STAGE1
set failsafe_procedure = DROP

# Modes
aux 0 0 0 900 2100 0 0  # Arm on AUX1 (CH5)
aux 1 1 1 1300 1700 0 0  # Angle on AUX2 mid
aux 2 2 1 1700 2100 0 0  # Horizon on AUX2 high
aux 3 13 2 1700 2100 0 0  # Beeper on AUX3
aux 4 35 3 1700 2100 0 0  # Turtle on AUX4
```

### 04.03.00 - HPXGRC Receiver

**Standard ELRS Configuration:**
- Protocol: CRSF
- PWM outputs: CH1-CH6
- Bind phrase: Use same as TX module
- Packet rate: 500Hz for racing, 250Hz for general

## 05.00.00 - Quick Reference

### 05.01.00 - Channel Assignment Summary

**Quadcopters (DarwinFPV F415):**
| CH | Function | Input | Notes |
|----|----------|-------|-------|
| 1 | Roll | Ail | Rate limited in Indoor/Outdoor |
| 2 | Pitch | Ele | Rate limited in Indoor/Outdoor |
| 3 | Throttle | Thr | Cut on disarm |
| 4 | Yaw | Rud | Rate limited |
| 5 | Arm | SA | 2-step with throttle |
| 6 | Flight Mode | SB | Indoor/Outdoor/Normal |
| 7 | Beeper | SF | Momentary |
| 8 | Turtle | SG | Momentary |

**Fixed Wings (Reflex V3):**
| CH | Function | Input | Notes |
|----|----------|-------|-------|
| 1 | Aileron | Ail | Throw limited in Beginner |
| 2 | Elevator | Ele | Throw limited in Beginner |
| 3 | Throttle | Thr | Cut on disarm |
| 4 | Rudder | Rud | Full throw |
| 5 | Reflex Mode | SC | Beginner/Advanced/Manual |
| 6 | Arm/Cut | SD | 2-step, no CH5 use |
| 7 | Flaps | SE | 3-pos |
| 8 | Gear | SF | 2-pos |

### 05.02.00 - Safety Check Commands

**Verify Arming Logic:**
```
Test Sequence:
1. Power on radio, ensure SA/SD down (disarm)
2. Verify CH5/CH6 = -100 (disarmed)
3. Move throttle to max
4. Toggle arm switch up
5. Verify still disarmed (throttle not low)
6. Move throttle to min
7. Verify armed after 0.5s delay
8. Verify CH5/CH6 = +100
9. Move throttle up, verify motor ready
10. Toggle arm switch down, verify immediate disarm
```

**Verify Mode2/Mode4:**
```
Test Sequence:
1. Set GV1 = 0 (Mode2)
2. Move left stick X-axis, verify CH1 (Roll) changes
3. Move left stick Y-axis, verify CH3 (Throttle) changes
4. Move right stick X-axis, verify CH4 (Yaw) changes
5. Set GV1 = 1 (Mode4)
6. Move left stick X-axis, verify CH4 (Yaw) changes
7. Move right stick X-axis, verify CH1 (Roll) changes
```
